!function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var a=r(1),n=r(2),i=r(3),o=r(6),s=r(13);$(document).ready(function(){var t=$("#inputUrlErorrs"),e=$("#startTestWaiter"),r=$("#startTestDefaultText");e.hide();var l=$("#startTestBtn"),u=l.attr("data-url"),c=$("#input_url"),h=$("#modalWaiter");h.hide();var p=new o.Displayer("#chartContainer","#tableContainer"),d=new s.Notifier(function(t){p.show(),p.visualize(t)});l.click(function(a){a.preventDefault(),t.html(""),c.removeClass("field-error");var n=c.val(),i=!1;/^(ftp|http|https):\/\/[^ "]+$/.test(n)?i=!0:/^[a-zA-Z0-9][a-zA-Z0-9-_]{0,61}[a-zA-Z0-9]{0,1}\.([a-zA-Z]{1,6}|[a-zA-Z0-9-]{1,30}\.[a-zA-Z]{2,3})$/.test(n)&&(n="http://"+n,i=!0),i?(e.show(),r.hide(),p.clean(),$.ajax({type:"POST",url:u,data:{url:n,connectionId:d.connectionId},success:function(a){a?(t.html(a),e.hide(),r.show(),c.addClass("field-error")):(e.hide(),r.show(),p.sortAndDisplay())},error:function(){e.hide(),r.show(),c.addClass("field-error"),p.hide()}})):c.addClass("field-error")}),$("#historyBtn").click(function(){h.show();var t=$(this).attr("data-update-custom"),e=$(t);$.ajax({type:$(this).attr("data-ajax-method"),url:$(this).attr("data-url"),success:function(r){h.hide(),e.html(r),i.Initializer.pagerInit(t+" ul.pager a","#historyTable")}})});var f=document.querySelector("#historyContainer");f.addEventListener("click",function(t){t.preventDefault();var e=$(t.target);if(e.is("a")&&"collapse"===e.attr("data-toggle")&&"true"===e.attr("data-switch")){var r=e.attr("href"),o=e.attr("data-url");a.Ajax.run(n.HttpMethod.POST,o,{historyRowId:r.slice(1),startIndex:0},function(t){$(r).html(t),e.attr("data-switch","false"),i.Initializer.pagerInit(r+" ul.pager a","#sitemapTable")})}})})},function(t,e,r){"use strict";var a=r(2),n=function(){function t(){}return t.run=function(t,e,r,n){$.ajax({type:a.HttpMethod[t],url:e,data:r}).done(n)},t}();e.Ajax=n},function(t,e){"use strict";!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.PUT=2]="PUT",t[t.DELETE=3]="DELETE"}(e.HttpMethod||(e.HttpMethod={}));e.HttpMethod;!function(t){t[t.First=1]="First",t[t.Next=2]="Next",t[t.Previous=3]="Previous",t[t.Last=4]="Last"}(e.PagerElementRole||(e.PagerElementRole={}));e.PagerElementRole},function(t,e,r){"use strict";var a=r(4),n=r(5),i=function(){function t(){}return t.pagerInit=function(t,e){var r;try{r=new n.Pager(t)}catch(t){return}var i=new a.PagerAjaxHandler(r,e);r.nextBtn.click=function(){i.sendAjaxRequest(r.nextBtn)},r.previousBtn.click=function(){i.sendAjaxRequest(r.previousBtn)}},t}();e.Initializer=i},function(t,e,r){"use strict";var a=r(1),n=r(2),i=function(){function t(t,e){this.pager=t,this.updateTarget=e}return t.prototype.sendAjaxRequest=function(t){var e=this;if(t.isEnabled){var r;r=t.rowId?{historyRowId:t.rowId,startIndex:t.startIndex}:{startIndex:t.startIndex},a.Ajax.run(n.HttpMethod.POST,t.url,r,function(t){$(e.updateTarget).html(t.contentHistory),e.pagerBtnStyleToggle(t)})}},t.prototype.pagerBtnStyleToggle=function(t){this.pager.previousBtn.startIndex=t.historyPager.previousStartIndex,this.pager.previousBtn.isEnabled=!t.historyPager.isFirstPage,this.pager.nextBtn.startIndex=t.historyPager.nextStartIndex,this.pager.nextBtn.isEnabled=!t.historyPager.isLastPage},t}();e.PagerAjaxHandler=i},function(t,e,r){"use strict";var a=r(2),n=function(){function t(t){this.element=$(t)}return Object.defineProperty(t.prototype,"click",{set:function(t){this.element.click(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return!this.element.parent().hasClass("disabled")},set:function(t){t?this.element.parent().removeClass("disabled"):this.element.parent().addClass("disabled")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"role",{get:function(){return a.PagerElementRole[this.element.attr("data-role")]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return+this.element.attr("data-start-index")},set:function(t){this.element.attr("data-start-index",t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.element.attr("href")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowId",{get:function(){return this.element.attr("data-history-row-id")},enumerable:!0,configurable:!0}),t}();e.PagerBtn=n;var i=function(){function t(t){this.selector=t,this.getPagerElements(t)}return t.prototype.getPagerElements=function(t){var e=this,r=$(t);if(0===r.length)throw"selector does not indicate page elements";r.each(function(t,r){switch(a.PagerElementRole[$(r).attr("data-role")]){case a.PagerElementRole.Next:e.nextBtn=new n(r);break;case a.PagerElementRole.Previous:e.previousBtn=new n(r)}})},t}();e.Pager=i},function(t,e,r){"use strict";var a=r(7),n=a.MeasurementsViewModel,i=r(8),o=r(11),s=function(){function t(t,e){this.isHidden=!0,this.model=new n,this.chartDisplayer=new i.ChartDisplayer(t,this.model),this.tableDisplayer=new o.TableDisplayer(e,this.model)}return t.prototype.visualize=function(t){this.format(t),this.model.push(t),this.chartDisplayer.display(t),this.tableDisplayer.display(t)},t.prototype.clean=function(){this.model.results=[],this.tableDisplayer.clear(),this.chartDisplayer.clear()},t.prototype.sortAndDisplay=function(){this.model.sortModelExceptFirst(),this.chartDisplayer.display(),this.tableDisplayer.display()},t.prototype.show=function(){this.isHidden&&(this.chartDisplayer.show(),this.tableDisplayer.show(),this.isHidden=!1)},t.prototype.hide=function(){this.isHidden||(this.chartDisplayer.hide(),this.tableDisplayer.hide(),this.isHidden=!0)},t.prototype.format=function(t){t.mintime=+t.mintime.toFixed(2),t.maxtime=+t.maxtime.toFixed(2)},t}();e.Displayer=s},function(t,e){"use strict";var r=function(){function t(t){this.results=t}return t.prototype.sortModelExceptFirst=function(){var t=this.results.shift();this.sortModel(),this.results.unshift(t)},t.prototype.sortModel=function(){this.results.sort(function(t,e){return e.mintime-t.mintime})},t.prototype.push=function(t){this.results.push(t)},t}();e.MeasurementsViewModel=r;var a=function(){function t(){}return t}();e.MeasurementResult=a;var n=function(){function t(){}return t}();e.HistoryPage=n;var i=function(){function t(){}return t}();e.HistoryPager=i},function(t,e,r){"use strict";var a=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=r(9),i=r(10),o=function(t){function e(e,r){t.call(this,e,r),this.chartInit(this.htmlElement),this.dataInit(),this.chart.create()}return a(e,t),e.prototype.displayFromLocalModel=function(){this.replaceChartData(this.splitModel()),this.chart.update()},e.prototype.displayFromOuterModel=function(t){this.updateChart(t)},e.prototype.clear=function(){this.modelParts=new s,this.replaceChartData(this.modelParts)},e.prototype.updateModelParts=function(t){this.modelParts.urls.push(t.url),this.modelParts.minValues.push(t.mintime),this.modelParts.maxValues.push(t.maxtime)},e.prototype.updateChart=function(t){this.updateModelParts(t),this.chart.update()},e.prototype.replaceChartData=function(t){this.chart.data[0].x=t.urls,this.chart.data[1].x=t.urls,this.chart.data[0].y=t.maxValues,this.chart.data[1].y=t.minValues},e.prototype.splitModel=function(){for(var t=new s,e=0,r=this.model.results;e<r.length;e++){var a=r[e];t.urls.push(a.url),t.minValues.push(a.mintime),t.maxValues.push(a.maxtime)}return t},e.prototype.dataInit=function(){this.modelParts=new s;var t={x:this.modelParts.urls,y:this.modelParts.maxValues,name:"Max",type:"bar",marker:{color:"rgb(55, 83, 109)"}},e={x:this.modelParts.urls,y:this.modelParts.minValues,name:"Min",type:"bar",marker:{color:"rgb(26, 118, 255)"}},r=[t,e];this.chart.data=r},e.prototype.chartInit=function(t){var e=$(t),r=975,a=450;e.hide(),this.chart=new i.Chart;var n={font:{family:"Segoe UI, Times New Roman, Open Sans, verdana, arial, sans-serif",color:"#444"},title:"Load Time Results",barmode:"overlay",autosize:!0,width:r,height:a,xaxis:{title:"Urls",showticklabels:!1,autorange:!0},yaxis:{title:"Time (s)",autorange:!0,titlefont:{size:16,color:"rgb(107, 107, 107)"},tickfont:{size:14,color:"rgb(107, 107, 107)"}},legend:{x:0,y:1,bgcolor:"rgba(255, 255, 255, 0)",bordercolor:"rgba(255, 255, 255, 0)"}};this.chart.layout=n,this.chart.canvasElement=t},e}(n.ElementDisplayer);e.ChartDisplayer=o;var s=function(){function t(){this.urls=[],this.minValues=[],this.maxValues=[]}return t}()},function(t,e){"use strict";var r=function(){function t(t,e){this.htmlElement=document.querySelector(t),this.model=e}return t.prototype.display=function(t){t?this.displayFromOuterModel(t):this.displayFromLocalModel()},t.prototype.show=function(){this.htmlElement.style.display="block"},t.prototype.hide=function(){this.htmlElement.style.display="none"},t}();e.ElementDisplayer=r},function(t,e){"use strict";var r=function(){function t(){}return t.prototype.create=function(){Plotly.newPlot(this.canvasElement,this.data,this.layout)},t.prototype.update=function(){Plotly.redraw(this.canvasElement)},t}();e.Chart=r},function(t,e,r){"use strict";var a=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=r(9),i=r(12),o=function(t){function e(e,r){t.call(this,e,r),this.tableMakerInit()}return a(e,t),e.prototype.tableMakerInit=function(){var t=["Url","Min (s)","Max (s)"],e=["url","mintime","maxtime"],r=new i.HeaderPropertyMaper(t,e);this.tableMaker=new i.TableMaker(this.htmlElement,r),this.tableMaker.tableClass="table table-bordered table-hover",this.tableMaker.createTabelInContainer()},e.prototype.displayFromLocalModel=function(){this.tableMaker.curentColumnNumber=1,this.tableMaker.fillTableFrom(this.model.results),this.tableMaker.curentColumnNumber=1},e.prototype.displayFromOuterModel=function(t){this.tableMaker.addRow(t)},e.prototype.clear=function(){var t=this.tableMaker.tableElement.children[0];t&&(t.innerHTML=""),this.tableMaker.addHeader()},e}(n.ElementDisplayer);e.TableDisplayer=o},function(t,e){"use strict";var r=function(){function t(t,e){this.numberColumn=!0,this.maper=e,this.tableContainer=t,this.curentColumnNumber=1}return t.prototype.makeHeaderRow=function(){var t="";return t+="<tr>",t+=this.makeHeadersByMaper(),t+="</tr>"},t.prototype.makeHeadersByMaper=function(){for(var t=this.numberColumn?"<th>#</th>":"",e=0,r=this.maper.list;e<r.length;e++){var a=r[e];t+="<th>"+a.headerName+"</th>"}return t},t.prototype.makeTableRow=function(t){var e=document.createElement("tr");return e.innerHTML=this.maper?this.makeTableDataByMaper(t):this.makeTableDataByDefault(t),e},t.prototype.makeClassAttribute=function(t){return""+(t?"class="+t:"")},t.prototype.addRows=function(t){for(var e=0,r=t;e<r.length;e++){var a=r[e];this.addRow(a)}},t.prototype.fillTableFrom=function(t,e){switch(void 0===e&&(e=a.Replace),e){case a.Append:this.addRows(t);break;case a.Replace:this.tableElement.innerHTML="",this.addHeader(),this.addRows(t)}},t.prototype.addRow=function(t){this.tableElement.children[0].appendChild(this.makeTableRow(t))},t.prototype.addHeader=function(){this.tableElement.innerHTML=this.makeHeaderRow()},t.prototype.createTabelInContainer=function(t){var e=t||this.tableContainer;if(!e)throw Error("I can not insert a table into nowhere, tableContainer is undefined");var r=document.createElement("table");this.tableClass&&(r.className=this.tableClass),this.tableElement=r,e.appendChild(r)},t.prototype.makeTableDataByDefault=function(t){var e=this.addRowCounter();for(var r in t)e+="<td>"+t[r]+"</td>";return e},t.prototype.makeTableDataByMaper=function(t){for(var e=this.addRowCounter(),r=0,a=this.maper.list;r<a.length;r++){var n=a[r];e+="<td>"+t[n.propertyName]+"</td>"}return e},t.prototype.addRowCounter=function(){return this.numberColumn?"<td>"+this.curentColumnNumber++ +"</td>":""},t}();e.TableMaker=r,function(t){t[t.Replace=0]="Replace",t[t.Append=1]="Append"}(e.InsertionMode||(e.InsertionMode={}));var a=e.InsertionMode,n=function(){function t(t,e){this.list=[],t&&e&&this.addMap(t,e)}return t.prototype.addMap=function(t,e){if(t.length!==e.length)throw Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.list.push(new i(t[r],e[r]))},t}();e.HeaderPropertyMaper=n;var i=function(){function t(t,e){this.headerName=t,this.propertyName=e}return t}();e.HeaderProperty=i},function(t,e){"use strict";var r=function(){function t(t){var e=$.connection.notificationHub;e.client.displayMessage=t;var r=this;$.connection.hub.start().done(function(){r.connectionId=$.connection.hub.id})}return t}();e.Notifier=r}]);
//# sourceMappingURL=index.js.map